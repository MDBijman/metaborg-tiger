module tiger-bindings

language Tiger

test number [[
42 
]] analysis succeeds 
 
test variable declaration [[
  let 
    var x := 1
  in 
    x + 4 
  end
]] analysis succeeds
 
test shadowing of variable declarations [[ 
  let 
    var x := "1"
    var x := 2 // shadows previous x
  in  
    x + x
  end
]] analysis succeeds
 
test shadowing of variable declarations [[ 
  let 
    var x := 1
    var x := "2" // shadows previous x
  in  
    x + x
  end
]] 2 errors

test duplicate type declarations [[ 
  let 
    type t = int
    var a := 1
    type t = int
    type t = string
    type r = {x : t}
  in
    2
  end
]] 2 errors

test for index variable [[
  let 
    var x := "a"
  in  
    for x := 1 to 10 do print(chr(x)); 
    print(x)
  end
]] analysis succeeds
 

test for index variable not in scope outside loop [[ 
  (for x := 1 to 10 do
    print(chr(x)); 
  x) // not in scope
]] 1 errors
 